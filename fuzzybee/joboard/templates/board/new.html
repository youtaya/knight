<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=XOyqpuhcxMxuHjpUr4T2BIOG"></script>
  <body>
    <h1>Hello, fuzzybee</h1>

    {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

    <form action="{% url 'home' %}" method="post">
      {% csrf_token %}
      <table>
        {# 可以使用as_ul, as_p来改变格式 #}
        {{ form.as_table }}
      </table>

      <input type="submit" onclick="formSubmit()" value="Confirm" />
    </form>
  </body>
</html>

<script type="text/javascript">

  if(window.attachEvent) {
    document.getElementById("id_hire_num").onpropertychange = set_alert_wb_comment();
  } else {
    document.getElementById("id_hire_num").addEventListener('input', set_alert_wb_comment, false);
  }

  function set_alert_wb_comment() {
    var address = document.getElementById("id_fact_addr").value;
    // alert("address "+address);
  	// 创建地址解析器实例
  	var myGeo = new BMap.Geocoder();
  	// 将地址解析结果显示在地图上,并调整地图视野
  	myGeo.getPoint(address, function(point){
  		if (point) {
        alert("got point");
  			alert("lat: "+point.lat + " lng:"+point.lng);
        var name = document.getElementById("id_fact_name").value;
        document.getElementById("id_fact_name").value = name + "##" +point.lat +"##" +point.lng;
  		}else{
  			alert("您选择地址没有解析到结果!");
  		}
  	}, "上海市");
  }

  function formSubmit() {

  }


</script>
